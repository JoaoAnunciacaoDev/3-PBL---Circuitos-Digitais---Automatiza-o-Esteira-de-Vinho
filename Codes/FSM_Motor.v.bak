module FSM_Motor (
    input clk, Reset,
    input Comando_Mover_Esteira,
    input Sensor_Pos_Enchimento, Sensor_Pos_CQ, Sensor_Pos_Lacre,
    output reg Motor_Ligar,
    output reg Motor_Pausado_Em_Posicao
);
    reg [1:0] estado_atual, proximo_estado;
    parameter PARADO = 2'b00, ANDANDO = 2'b01, PAUSADO = 2'b10;

    always @(posedge clk or posedge Reset) begin
        if (Reset) estado_atual <= PARADO;
        else estado_atual <= proximo_estado;
    end

    always @(*) begin
        proximo_estado = estado_atual;
        case (estado_atual)
            PARADO: if (Comando_Mover_Esteira) proximo_estado = ANDANDO;
            ANDANDO: if (!Comando_Mover_Esteira || Sensor_Pos_Enchimento || Sensor_Pos_CQ || Sensor_Pos_Lacre) proximo_estado = PAUSADO;
            PAUSADO: if (Comando_Mover_Esteira) proximo_estado = ANDANDO;
        endcase
    end

    always @(*) begin
        Motor_Ligar = 1'b0; Motor_Pausado_Em_Posicao = 1'b0;
        case (estado_atual)
            ANDANDO: Motor_Ligar = 1'b1;
            PAUSADO: Motor_Pausado_Em_Posicao = 1'b1;
        endcase
    end
endmodule